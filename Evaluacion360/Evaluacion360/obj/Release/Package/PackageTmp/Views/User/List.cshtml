@*@model PagedList.IPagedList<Evaluacion360.Models.UserListViewModel>*@

@model Evaluacion360.Models.ViewModels.IndexViewModel

@*@using PagedList.Mvc*@

@{
    Layout = "";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Listado de Usuarios</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Pooled Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />

    <script type="application/x-javascript">
        addEventListener("load", function()
            { setTimeout(hideURLbar, 0); },
            false);
            function hideURLbar()
            { window.scrollTo(0,1); }        
        })
    </script>

    <!-- Bootstrap Core CSS -->
    <link href="~/Css/bootstrap.min.css" rel="stylesheet" type='text/css' />
    <!-- Custom CSS -->
    <link href="~/Css-Pool/style2.css" rel='stylesheet' type='text/css' />
    <!-- Graph CSS -->
    <link href="~/Css-Pool/font-awesome.css" rel="stylesheet" type='text/css' />
    <link href="~/Css/jquery-ui.css" rel="stylesheet" />
    <!-- jQuery -->
    <script src="~/js/jquery-2.1.4.min.js"></script>
    <script src="~/js/datatables.js"></script>
    <!-- //jQuery -->
    <!-- tables -->
    <link href="~/Css/table-style.css" rel="stylesheet" type="text/css" />
    <link href="~/Css/basictable.css" rel="stylesheet" type="text/css" />
    <link href="~/Css/datatables.css" rel="stylesheet" />

    <script src="~/js/jquery.basictable.min.js"></script>
    <script src="~/js/datatables.js"></script>
    <script src="~/js/ScreenSize.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#table').basictable();

            $('#table-breakpoint').basictable({
                breakpoint: 768
            });

            $('#table-swap-axis').basictable({
                swapAxis: true
            });

            $('#table-force-off').basictable({
                forceResponsive: false
            });

            $('#table-no-resize').basictable({
                noResize: true
            });

            $('#table-two-axis').basictable();

            $('#table-max-height').basictable({
                tableWrapper: true
            });
        });

    </script>
    <!-- //tables -->
    <link href='//fonts.googleapis.com/css?family=Roboto:700,500,300,100italic,100,400' rel='stylesheet' type='text/css' />
    <link href='//fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    @*<link href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" />*@
    <!-- lined-icons -->
    <link rel="stylesheet" href="~/Css/icon-font.min.css" type='text/css' />
    <!-- //lined-icons -->
</head>
<body>
    <div class="agile-grids">
        <!-- tables -->
        <div class="agile-tables">
            <div class="-table-info">
                <div class="modal-header">
                    <h1 class="center-block">Usuarios </h1>
                    <span>
                        <button class="btn btn-danger btn-sm" onclick="location.href='@Url.Content("~/User/Create/")'">Crear Usuario</button>
                        <button class="btn btn-primary btn-sm" onclick="location.href='@Url.Content("~/Home/Index/")'">Volver al Menú</button>
                    </span>
                </div>
                <table id="table" class="display">
                    <thead>
                        <tr>
                            <th> @Html.DisplayName("Codigo Usuario")</th>
                            <th> @Html.DisplayName("Nombre Usuario")</th>
                            <th> @Html.DisplayName("Tipo Usuario")</th>
                            <th> @Html.DisplayName("Codigo Cargo")</th>
                            <th> @Html.DisplayName("Estado")</th>
                            <th> @Html.DisplayName("Acciones")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.Secciones)
                        {
                            <tr>
                                <td>@Html.DisplayFor(modelItem => item.Codigo_Usuario)</td>
                                <td>@Html.DisplayFor(modelItem => item.Nombre_Usuario)</td>
                                <td>@Html.DisplayFor(modelItem => item.Tipo_Usuario)</td>
                                <td>@Html.DisplayFor(modelItem => item.Codigo_Cargo)</td>
                                <td>@Html.DisplayFor(modelItem => item.IdState)</td>

                                <td>
                                    <button class="btn btn-warning btn-xs" onclick="location.href='@Url.Action("Edit","User", new { id=item.Codigo_Usuario })'" title="Editar">
                                        <span class="fa fa-pencil"></span>
                                    </button>
                                    <button class="btn btn-primary btn-xs" onclick="location.href='@Url.Action("Details", "User", new {id=item.Codigo_Usuario})'" title="Detalles">
                                        <span class="fa fa-eye"></span>
                                    </button>
                                    <button class="btn btn-danger btn-xs" onclick="location.href='@Url.Action("Delete", "User", new {id=item.Codigo_Usuario })'" title="Eliminar">
                                        <span class="fa fa-trash"></span>
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                    @if (Model.TotalDeRegistros > 0)
                    {
                        <tfoot>
                            <tr>
                                <th> @Html.DisplayName("Codigo Usuario")</th>
                                <th> @Html.DisplayName("Nombre Usuario")</th>
                                <th> @Html.DisplayName("Tipo Usuario")</th>
                                <th> @Html.DisplayName("Codigo Cargo")</th>
                                <th> @Html.DisplayName("Estado")</th>
                                <th> @Html.DisplayName("Acciones")</th>
                            </tr>
                        </tfoot>
                    }
                </table>
            </div>
        </div>
        <div class="align-content-md-center">
            @{Html.RenderPartial("_Paginador", Model); }
        </div>
    </div>

    <script>
        function GetScreenSize() {
            var width = window.innerWidth;
            var height= window.innerHeight;
            var resolucion = $(window).width();
            $(document).ready(function () {
                if (resolucion < 1024) {
                    return 8
                }
                else if (resolucion < 1366) {
                    return 10
                }
                else {
                    return 15
                }
            })
            GetScreenSize();


        function CrearModelo(data) {
            var json = JSON.stringify(data);

            //metodo para enviar al controlador el json y convertirlo a un objeto multidimensional
            mvc.Configuracion.CrearOperacion.post({ Json: json }, res => {

            //Manejador de iframes
            pestanas.verOpcion(11);

            //posicionar el iframe en el top y llamar al controlador enviandole el json
            top.frames['FrMnuCfgPuestosTrabajo'].location.href = '/Configuracion/EmularLocal?Json=' + res;
            pestanas.anadirEvento();

        });             
    }
    </script>
</body>
</html>
